# ViteJs (vite_rails && Vite_ruby)
this page will guide you through the implementation or the installation the vite_rails gem ( Vite JS ).


## hepful links :

* [Official documentation](https://vite-ruby.netlify.app/guide/introduction.html)
* [CLI Commands for vite js](https://vite-ruby.netlify.app/guide/development.html#cli-commands-%E2%8C%A8%EF%B8%8F)
* [How vite.js works andresons  why Vite is Better than Webpack?](https://vite-ruby.netlify.app/guide/introduction.html)
* [Migrating from (Rails) Webpack(er) to Vite](https://www.stefanwienert.de/blog/2022/07/11/migrating-from-webpacker-to-vite-rails/)
* [example: mandacom repo](https://gitlab.conlance.org/conlance/mandacom)

## Installation ğŸ·

Open the Gemfile. and add ***gem 'vite_rails'*** , then run in your Terminal

````
bundle install && bundle exec vite install
````

## What vite_rails installed into your Rails app ğŸ·

**1. .gitignore was changed :** Vite.js is here to handle npm assets, so node_modules is ignored for sure. Whatever is in public/ is technically needed by vite_rails, so that we don't actually need to know what it is.

**2. app/frontend/entrypoints/application.js :** In place of a Separate directory for Javascript and any other assets, now everything is handled from **app/frontend**

**3. app/views/layouts/application.html.erb :** That's the most interesting piece here
`````
<%= vite_client_tag %>
<%= vite_javascript_tag 'application' %>
`````

**vite_client_tag :** Renders the Vite client to enable Hot Module Reload (They will only render if the dev server is running.).

**vite_react_refresh_tag :** Same thing as **vite_client_tag :** , but only when using React.

**vite_javascript_tag 'application' :** Tthis tag should include the javascript generated by vite.


**4. Other files changed :**

Not so interesting, but mentionable: *package-lock.json* has been changed (of course), *config/initializers/content_security_policy.rb* has also been changed for security reasons, and bin/vite has been added to start vite itself when a local server is started.


## Tag Helpers ğŸ·

To reference these JavaScript and CSS files in your Rails layouts or templates, managed by Vite, use the following tools:

* **vite_javascript_tag:** Renders a *script* tag referencing a JavaScript file

* **vite_typescript_tag:** Renders a *script* tag referencing a TypeScript file

* **vite_stylesheet_tag:** Renders a *link* tag referencing a CSS file

* **vite_image_tag :** Renders a *src* tag referencing a images

* **vite_assets_path :** Renders for other types of asset, pass the resulting URI to the appropriate tag helper.

* **vite_asset_url :** When you need the full URL.

You may pass all the options specified by **javascript_include_tag** and **stylesheet_link_tag**

## Setup Stimulus on Vite  ğŸ·

When you apply Stimulus, Check out [vite-plugin-stimulus-hmr](https://github.com/ElMassimo/vite-plugin-stimulus-hmr), you no more have to refresh the page when you are optimizing your controls ğŸ˜ƒ.

## Some issues :

Unfortunately, Vite.js does not support Sass.

**BUG** 
````
[vite] Internal server error: Preprocessor dependency "sass" not found. Did you install it?
````
**FIX**
`````
yarn remove node-sass
yarn sass
`````

